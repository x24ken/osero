import { createSlice } from "@reduxjs/toolkit";

const initialState = [
  [null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null],
  [null, null, null, "black", "white", null, null, null],
  [null, null, null, "white", "black", null, null, null],
  [null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null],
  [null, null, null, null, null, null, null, null],
];

// payloadに流れてくるのは[0,0]マス目の値の配列
const othello = createSlice({
  name: "othello",
  initialState,
  reducers: {
    changeBlack(state, { type, payload }) {
      console.log(type, payload);
      return [...state, (state[payload[0]][payload[1]] = "black")];
    },
    changeWhite(state, { type, payload }) {
      console.log(type, payload);
      return [...state, (state[payload[0]][payload[1]] = "white")];
    },
    othelloReset(state, { type, payload }) {
      console.log(type, payload);
      return initialState;
    },
  },
});

const { changeBlack, changeWhitem, othelloReset } = othello.actions;

export { changeBlack, changeWhitem, othelloReset };
export default othello.reducer;
